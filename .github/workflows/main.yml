name: ci
on: [push, pull_request]

jobs:
  build_and_deploy:
    env:
        # latest non-preview version(+1) at the time of writing this CI script
        # NOTE!!: sync with version number in Xamarin.Forms.Platform.GTK.csproj
        BASE_VERSION: 5.0.0.2515
        DEFAULT_REF_TO_NUGET_PUSH: refs/heads/5.0.0
    runs-on: windows-2019
    steps:
    - uses: actions/checkout@v1
        
    - name: Package and Upload
      run: |
        $env:DOTNETFORMS_VERSION = "salam"
        New-Item .\$env:DOTNETFORMS_VERSION.txt
        echo "DOTNETFORMS_VERSION2=yellow" >> $GITHUB_ENV
        echo "$env:BASE_VERSION"

    - name: GTK Package and upload
      run: |
        $version="${{ env.DOTNETFORMS_VERSION2 }}"
        New-Item .\ss$version.txt
        echo "${{ env.DOTNETFORMS_VERSION2 }}"
        echo "${{ env.BASE_VERSION }}"
    
    - name: ls
      run: |
        ls .